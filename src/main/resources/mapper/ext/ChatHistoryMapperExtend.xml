<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xlh.chat.dao.mapper.ChatHistoryMapperExtend">
    <resultMap id="ExtendResultMap" type="com.xlh.chat.model.ChatHistory">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="id" jdbcType="BIGINT" property="id"/>
        <result column="send_user_id" jdbcType="BIGINT" property="sendUserId"/>
        <result column="receive_user_id" jdbcType="BIGINT" property="receiveUserId"/>
        <result column="group_id" jdbcType="BIGINT" property="groupId"/>
        <result column="message" jdbcType="VARCHAR" property="message"/>
        <result column="send_time" jdbcType="TIMESTAMP" property="sendTime"/>
        <result column="create_time" jdbcType="TIMESTAMP" property="createTime"/>
        <result column="modify_time" jdbcType="TIMESTAMP" property="modifyTime"/>
        <result column="msg_type" jdbcType="TINYINT" property="msgType"/>
        <result column="chat_type" jdbcType="TINYINT" property="chatType"/>
    </resultMap>


    <select id="selectUserOrGroupChatList" parameterType="com.xlh.chat.model.dto.ChatHistoryDto"
            resultMap="ExtendResultMap">
        select id, send_user_id, receive_user_id, group_id, message, send_time, create_time, modify_time, msg_type,
        chat_type
        from
        user_chat_history
        <where>
            <if test="sendUserId != null">
                and send_user_id = #{sendUserId}
            </if>
            <if test="receiveUserId != null">
                and receive_user_id = #{receiveUserId}
            </if>
            <if test="groupId != null">
                and group_id = #{groupId}
            </if>
            <if test="msgType != null">
                and msg_type = #{msgType}
            </if>
            <if test="chatType != null">
                and chat_type = #{chatType}
            </if>
        </where>
    </select>
</mapper>
